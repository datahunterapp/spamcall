import telebot
import requests
import time
from keep_alive import keep_alive
keep_alive()

phone_numbers_string='''01141904182
01101322529
01153418345
01159015092
01273519150
01207896463
01001627450
01096841430
01067827807
01029218735
01127138473
01024658394
01157249594
01024776395
01226905327
01212484146
01279368533
01094861307
01126183142
01063818927
01278561026
01067357476
01092406238
01140995605
01221671561
01211219154
01023429003
01156954028
01128909460
01205632766
01023114793
01287013409
01275264242
01050542336
01062619745
01063761346
01278552296
01227356065
01552121992
01113195508
01152165012
01154669520
01015914094
01155607992
01210204326
01146026712
01093835376
01113185395
01151708117
01156123646
01125132864
01288579696
01029294604
01205275199
01014490590
01015103916
01027546387
01064524404
01098787039
01029178704
01063279527
01287600577
01552179699
01024138495
01156501103
01110552110
01015306494
01121374722
01153104619
01066394986
01220796396
01225974549
01150048739
01064422819
01206137526
01014714736
01270411954
01032535014
01017012033
01120158954
01125835950
01060371169
01226477461
01223399381
01141656497
01221630421
01066482832
01119785690
01005582641
01020789334
01110411559
01063980172
01006697911
01016793588
01276988118
01098211641
01016838873
01275532244
01141676814
01070899021
01271508964
01274109838
01067673682
01013594524
01144525014
01221412306
01554027004
01204847221
01050970515
01099427585
01226207536
01112587640
01128261658
01201724235
01030397158
01010416325
01018130244
01272554934
01050666121
01095426435
01091198567
01289788437
01030848136
01113794910
01115525850
01117814527
01212801371
01008382765
01028616389
01142452803
01204872674
01064308389
01211290147
01063486216
01113474423
01104169818
01158405478
01229729545
01026880548
01129688705
01143256756
01551105694
01200767860
01126724218
01147519789
01024704709
01021409574
01210404152
01124901447
01554555715
01030965338
01146018054
01212988133
01016932469
01124807818
01280373847
01021263812
01006710431
01066248974
01032153540
01025640389
01270378002
01050883534
01016775389
01274593178
01225985802
01033446143
01289475644
01206168482
01067727606
01271253571
01095916689
01026619459
01558577189
01012600814
01228567642
01150836760
01012649185
01093521377
01003774092
01022380252
01033777197
01144050282
01095885138
01021215983
01552072879
01150186400
01003406308
01001383082
01113409100
01062498491
01276088469
01002601469
01227017314
01092132596
01019279897
01207987024
01282789951
01126335297
01097057354
01276442038
01023201714
01271381964
01120993719
01100615989
01282559066
01015008653
01282001839
01208868495
01125203553
01270471133
01007606086
01029791277
01025282518
01093586107
01154293996
01280549289
01226236996
01206778257
01011254689
01281516399
01090728558
01095350890
01018040475
01067957966
01276219901
01158396459
01099655149
01550209168
01211636065
01552498861
01272300913
01123634649
01067902433
01024671837
01012065449
01212235136
01224515249
01097334640
01066715042
01015687104
01015123852
01205365797
01080716127
01287531973
01068592102
01121669778
01226804672
01070463657
01006198389
01064127274
01223862809
01212624552
01114566381
01278534177
01064443853
01019764821
01281468592
01067571932
01557561237
01020337858
01024055659
01123452948
01114723681
01207538309
01099120381
01030825502
01028394347
01029929583
01142571156
01013218769
01212344248
01025027297
01006635914
01013419214
01102243283
01009384972
01010227456
01144083159
01066382496
01556084974
01064972658
01021357924
01003770742
01005571121
01157588486
01102215579
01127650274
01271640637
01026791956
01284838734
01010275023
01501438155
01201196462
01013144252
01129188146
01212394583
01110761267
01286410690
01150405527
01017410522
01157738666
01147055221
01006818808
01144452480
01062010760
01096770636
01203029615
01093620786
01001168618
01061641043
01116785756
01096250064
01128407895
01210890201
01095761662
01156471419
01212237039
01017158823
01063893260
01203194466
01012665040
01145175159
01122054931
01156470659
01061326649
01221307332
01026968092
01022705972
01272943987
01114672418
01229498863
01064900847
01208831059
01507508773
01228080761
01145203286
01280758217
01093848838
01030740787
01091548591
01096877384
01204274208
01061821314
01553484914
01200757524
01205173903
01008491635
01205412889
01021926997
01093504160
01158958429
01201675858
01026065721
01145331060
01156299948
01097011113
01226868275
01229711243
01068036202
01033492947
01024690960
01097261935
01143510655
01147299585
01015460168
01014841979
01064460839
01020213718
01094628241
01280183185
01279184803
01220306625
01008818620
01272183002
01121016609
01142036603
01063058953
01222470261
01090785501
01208392029
01206382003
01015786602
01063202488
01225833594
01097163475
01154287326
01013852000
01113991726
01026452169
01101391715
01208229387
01158176446
01126431078
01274736273
01207712087
01112804130
01030665989
01012559560
01278860814
01020635115
01061693231
01157342747
01206336059
01550761456
01024512684
01100393373
01552721004
01001181596
01150600875
01273631750
01064596559
01207219870
01028500798
01065411384
01066428478
01287545494
01067669860
01223163499
01220038050
01119682554
01201175296
01156186032
01013306748
01095882672
01119751360
01066867709
01156832943
01203972188
01206683408
01027383097
01032636533
01212807349
01123034659
01016104535
01090976894
01278320956
01551510330
01287332955
01147239364
01110294614
01226245093
01096620368
01025125326
01147377808
01278113117
01201069745
01008921102
01150836738
01275128183
01286828959
01027592030
01150705410
01003258587
01003971295
01009867351
01013867267
01014130690
01014230682
01005727702
01017064621
01020020769
01022630595
01025142387
01029169863
01030072936
01030717473
01030771813
01050439220
01062831310
01091956366
01118553465
01121060582
01121593277
01146791239
01148121516
01149426857
01151307796
01206521421
01211956570
01220032297
01226251568
01227227464
01227598157
01272876968
01069321012
01278069139
01278138175
'''
phone_numbers_list = phone_numbers_string.strip().split('\n')




# Initialize your Telegram bot with the token you obtained from BotFather
bot = telebot.TeleBot("6891639487:AAHXiGM2tumJSwuYe0ydtSYQkypPE4ZnEeY")
running = True
def make_call(phone_number,message):
    url = "https://sms-call.vercel.app/api/call"
    payload = {
        "phone": phone_number
    }
    try:
        response = requests.post(url, json=payload)
        if response.json()['message'] == 'Sent':
            print(f"Call made to {phone_number} successfully!")
            bot.send_message(-1002041695132, f"Calls sent successfully to {phone_number}")
        else:
            print(f"Failed to make call to {phone_number}. Status code: {response.status_code}")
            bot.send_message(-1002041695132, f"Failed to make call to {phone_number}. error is: {response.json()['message']}")
    except requests.exceptions.RequestException as e:
        print(f"Error occurred while making call to {phone_number}: {e}")
        bot.send_message(-1002041695132, f"Error occurred while making call to {phone_number}: {e}")

def make_calls(phone_numbers,message):
    global running
    for number in phone_numbers:
        if not running:
            break  
        make_call(number,message)
        time.sleep(2)
        

# Handle "/send" command from Telegram
@bot.message_handler(commands=['send'])
def send_messages(message):

    # Example list of phone numbers
    bot.reply_to(message, "Sending......")
    global running
    running = True
    make_calls(phone_numbers_list,message)
    bot.reply_to(message, "Done sent calls successfully!")
@bot.message_handler(commands=['start'])
def send_messages(message):

    bot.send_message(-1002041695132, "/send دوس هنا عشان تبعت المكالمات ")

@bot.message_handler(commands=['stop'])
def stop_messages(message):
    global running
    running = False
    bot.reply_to(message, "Send Call stopped!")

# Start the bot
bot.infinity_polling()

